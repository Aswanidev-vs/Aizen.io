<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sōsuke Aizen - Former Captain</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/p5.js"></script>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="#profile">Profile</a></li>
                <li><a href="#status">Status</a></li>
                <li><a href="#zanpakuto">Zanpakutō</a></li>
                <li><a href="#partners">Partners</a></li>
                <li><a href="#operations">Operations</a></li>
            </ul>
        </nav>
        <h1>Sōsuke Aizen - Former Captain of Gotei 13</h1>
    </header>

    <main class="container">
        <div id="contentWrapper">
            <section id="profile" class="profile">
                <img src="Aizen sosuke _ pfp _ wallpaper _ icon.jpeg" alt="Sōsuke Aizen Profile Picture" class="profile-img">
                <div class="profile-info">
                    <h2>Personal Information</h2>
                    <ul>
                        <li><strong>Race:</strong> Soul</li>
                        <li><strong>Birthday:</strong> May 29</li>
                        <li><strong>Gender:</strong> Male</li>
                        <li><strong>Height:</strong> 186 cm (6'1")</li>
                        <li><strong>Weight:</strong> 74 kg (163 lbs)</li>
                    </ul>
                </div>
            </section>

            <section id="status" class="status">
                <h2>Professional Status</h2>
                <p><strong>Affiliation:</strong> Himself</p>
                <p><strong>Previous Affiliation:</strong> Gotei 13, Soul Society, Arrancar Army</p>
                <p><strong>Profession:</strong> Shinigami</p>
                <p><strong>Position:</strong> None</p>
                <p><strong>Previous Positions:</strong></p>
                <ul>
                    <li>Leader of the Arrancar Army</li>
                    <li>Captain of the 5th Division</li>
                    <li>Lieutenant of the 5th Division</li>
                    <li>Instructor at the Shin'ō Academy</li>
                </ul>
            </section>

            <section id="zanpakuto" class="zanpakuto">
                <h2>Zanpakutō</h2>
                <p><strong>Shikai:</strong> Kyōka Suigetsu</p>
            </section>

            <section id="partners" class="partners">
                <h2>Previous Partners</h2>
                <ul>
                    <li>Gin Ichimaru</li>
                    <li>Kaname Tōsen</li>
                    <li>Shinji Hirako</li>
                    <li>Momo Hinamori</li>
                </ul>
            </section>

            <section id="operations" class="operations">
                <h2>Base of Operations</h2>
                <p>Muken, Soul Society</p>
            </section>
        </div>
    </main>

    <audio id="aizenAudio" src="Shatter, Kyoka Suigetsu! [JY_g2Fk0qMM].mp3" preload="auto"></audio>

    <div id="glassEffect"></div>

    <script>
        let anim;
        let animationStarted = false;
        let animationDuration = 1500; // Duration of the animation in milliseconds

        function setup() {
            createCanvas(windowWidth, windowHeight).style('position', 'fixed').style('top', '0').style('left', '0').style('pointer-events', 'none');
            noLoop(); // Prevent continuous drawing
        }

        function draw() {
            if (anim) {
                background(0);
                anim.draw(millis());
                if (millis() - anim.t0 > animationDuration) {
                    anim = null; // Stop animation after it's finished
                    noLoop(); // Stop the draw loop
                    document.getElementById('contentWrapper').style.clipPath = 'none'; // Reset clip-path
                    animationStarted = false; // Reset animation state
                }
            }
        }

        class AnimGlassBreak {
            constructor(t0) {
                this.t0 = t0;
                this.shards = [];

                // Divide the window into shards
                this.divide(
                    createVector(0, 0),
                    createVector(width, 0),
                    createVector(width, height),
                    createVector(0, height)
                );
            }

            divide(a, b, c, d, i = 0) {
                const maxDivisions = 8;
                if (i < maxDivisions) {
                    const range = map(i, 0, maxDivisions, 0.2, 0.45);
                    const low = 0.5 - range;
                    const high = 0.5 + range;
                    let p0 = p5.Vector.lerp(a, b, random(low, high));
                    let p1 = p5.Vector.lerp(c, d, random(low, high));
                    this.divide(p0, p1, d, a, i + 1);
                    this.divide(b, c, p1, p0, i + 1);
                } else {
                    this.shards.push(new Shard(a, b, c, d));
                }
            }

            draw(t) {
                t = t - this.t0;
                t = t / animationDuration * 60;
                t = max(0, t - 2);
                for (let shard of this.shards) {
                    shard.draw(t);
                    const clipPath = `polygon(${shard.getClipPath()})`;
                    document.getElementById('contentWrapper').style.clipPath = clipPath;
                }
            }
        }

        class Shard {
            constructor(a, b, c, d) {
                this.pos = createVector(
                    (a.x + b.x + c.x + d.x) / 4,
                    (a.y + b.y + c.y + d.y) / 4
                );
                this.vel = this.pos.copy().sub(createVector(width / 2, height / 2));
                this.vel.normalize().mult(random(3, 9) * 2000 / height);

                this.angularVel = random(-0.2, 0.2);

                this.points = [a, b, c, d];
            }

            getClipPath() {
                return this.points.map(p => `${p.x}px ${p.y}px`).join(', ');
            }

            draw(t) {
                push();
                beginShape();
                translate(this.vel.x * t, this.vel.y * t);
                translate(this.pos);
                rotate(t * this.angularVel);
                translate(-this.pos.x, -this.pos.y);
                for (let p of this.points) {
                    vertex(p.x, p.y);
                }
                endShape(CLOSE);
                pop();
            }
        }

        document.body.addEventListener('click', function () {
            const audio = document.getElementById('aizenAudio');
            const glassEffect = document.getElementById('glassEffect');

            document.body.style.pointerEvents = 'none';

            audio.play();
            glassEffect.classList.add('active');

            if (!animationStarted) {
                anim = new AnimGlassBreak(millis());
                animationStarted = true;
                loop();
            }

            setTimeout(() => {
                glassEffect.classList.remove('active');
                document.getElementById('contentWrapper').style.clipPath = 'none';
                setup(); // Reinitialize the canvas
                document.body.style.pointerEvents = 'auto';
                document.body.style.overflow = 'auto';
            }, animationDuration);
        });

        window.addEventListener('resize', () => {
            resizeCanvas(windowWidth, windowHeight);
        });
    </script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, #121212, #121212);
            color: #e0e0e0;
            overflow: auto;
        }

        #contentWrapper {
            position: relative;
            z-index: 2;
            clip-path: none;
            overflow: hidden;
        }

        header {
            background: #333;
            color: #fff;
            padding: 15px 0;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
            background: #444;
        }

        nav ul li {
            margin: 0;
        }

        nav ul li a {
            color: #e0e0e0;
            text-decoration: none;
            padding: 10px 20px;
            display: block;
        }

        nav ul li a:hover {
            background: #555;
            border-radius: 4px;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: auto;
            overflow: auto;
            position: relative;
            z-index: 2;
        }

        .profile {
            display: flex;
            align-items: center;
            background: #1e1e1e;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .profile-img {
            border-radius: 50%;
            width: 15vw;
            height: auto;
            margin-right: 20px;
            border: 4px solid #f8c300;
        }

        .profile-info,
        .status,
        .zanpakuto,
        .partners,
        .operations {
            background: #262525;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        h2 {
            color: #f8c300;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        ul li {
            margin: 10px 0;
        }

        a {
            color: #f8c300;
        }

        a:hover {
            text-decoration: underline;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 1;
        }

        #glassEffect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: none;
            pointer-events: none;
            z-index: 3;
            display: none;
            animation: glassBreak 2s forwards;
        }

        @keyframes glassBreak {
            0% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(1.2) rotate(30deg);
                opacity: 0;
            }
        }

        #glassEffect.active {
            display: block;
        }
    </style>
</body>
</html>
